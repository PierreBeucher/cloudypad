# Old variables, to be removed in V1
# Used to remove potential old NVIDIA driver installation
nvidia_driver_package_version: ''
nvidia_driver_persistence_mode_on: yes
nvidia_driver_branch: "535"
nvidia_driver_ubuntu_branch: "{{ nvidia_driver_branch }}"
nvidia_driver_ubuntu_packages_suffix: "-server"
# END Old variables, to be removed in V1

nvidia_driver_module_file: /etc/modprobe.d/nvidia.conf
nvidia_driver_module_params: ''

# Install version from .run file
# See https://www.nvidia.com/en-us/drivers/unix/ or https://download.nvidia.com/XFree86/Linux-x86_64
nvidia_driver_display_dotrun_install_version: "580.95.05"

# Datacenter driver version
# See https://developer.nvidia.com/datacenter-driver-archive
nvidia_driver_datacenter_dotrun_install_version: "580.82.07"

# Skip Docker restart during NVIDIA driver installation
nvidia_driver_skip_docker_restart: false

# Skip reboot during NVIDIA driver installation
nvidia_driver_skip_reboot: false

# NVIDIA Container Toolkit version
# See available versions: apt-cache madison nvidia-container-toolkit
# Pinned to avoid drift between providers (CDI vs Legacy mode behavior differences)
# IMPORTANT: Must stay on 1.17.x - versions 1.18+ default to CDI mode which keeps
# /dev/dri/card1 at 0660 root:root inside the container, preventing the NVIDIA Vulkan
# driver from accessing the DRM card node, causing vkGetPhysicalDeviceSurfacePresentModesKHR
# to fail with VK_ERROR_UNKNOWN (-13) and a black screen.
# Legacy mode (1.17.x) sets /dev/dri/card1 to 0666, allowing proper GPU access.
nvidia_container_toolkit_version: "1.17.8-1"